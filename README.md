# MonitorHead

## О проекте

Проект был разработан для исследовательской работы в одном из медицинских научно-исследовательских институтов.

**Основная задача программы** — отслеживание положения головы в пространстве. Положение головы определяется с помощью датчиков, данные с которых обрабатываются и передаются на компьютер по проводу или по беспроводному каналу связи. Также возможна загрузка данных из лог-файла.

На компьютере работает приложение, которое принимает эти данные и отображает их в графическом интерфейсе (GUI). Интерфейс включает следующие элементы:

- **Информационная панель:** ключевая информация о действиях пользователя.
- **Настройки подключения:** указание COM-порта, скорости и отображение статуса соединения.
- **Панель управления:** отображение состояния программы, кнопки для загрузки лог-файла, подключения к COM-порту и калибровки датчика.
- **Блок 2D-визуализации:**
  - Отдельные виджеты для углов тангажа (pitch), крена (roll) и рыскания (yaw).
  - Графическое и цифровое отображение положения головы.
  - Цифровое отображение угловой скорости.
  - График изменений за последние 30 секунд, совмещённый с отметками о субъективном ощущении головокружения пациента.
- **Блок 3D-визуализации:**
  - 3D-модель головы в прямоугольной изометрии.
  - Субъективное ощущение головокружения отображается в виде эффекта покраснения по краям экрана.
  - Отображение текущих значений углов.
- **Блок работы с лог-файлом:**
  - Элементы управления воспроизведением (анимацией) данных из лога.
  - Ползунок для перемотки по временной шкале.

## Описание входных данных

```
                            1        2    3     4     5   6    7   8
На примере этой строки: 0000000009;-0,80;0,85;-0,80;-6,0;9,0;-10,5;0
```
0. В качестве разделителя используются точка с запятой ";". В качестве десятичного разделителя используется запятая ",".
1. 0000000009 - INT - номер кадра / частота обновления данных. Кадров за секунду можно выставить как 30 так и 60. Увеличивается от 0000000000 до предедела int. 
2. -0,80   - FLOAT - угол по тангажу (PITCH). Диапазон: -120 ... 120 градусов. Точность: до сотых.
3. 0,85    - FLOAT - угол по крену (ROLL). Диапазон: -120 ... 120 градусов. Точность: до сотых.
4. -0,80   - FLOAT - угол по рысканью (YAW). Диапазон: -120 ... 120 градусов. Точность: до сотых.
5. -6,0    - FLOAT - угловая скорость по тангажу (PITCH). Точность: до десятых. Вычисляемое значение: текущий угол - угол прошлого кадра.
6. 9,0     - FLOAT - угловая скорость по крену (ROLL). Точность: до десятых. Вычисляемое значение: текущий угол - угол прошлого кадра.
7. -10,5   - FLOAT - угловая скорость по по рысканью (YAW). Точность: до десятых. Вычисляемое значение: текущий угол - угол прошлого кадра.
8. 0       - INT - Ощущение головокружения: 0 - нет головокружения (кнопка отжата), 1 - есть головокружение (кнопка нажата).



Скорость порта - 115200 baud.
Строка с максимальным количеством знаков: 0000000009;-111,80;-112,85;-113,80;-110,0;-109,0;-108,5;0
0. ;          - 7 знаков.
1. 0000000009 - 10 знаков.
2. -111,80    - 7 знаков.
3. -112,85    - 7 знаков.
4. -113,80    - 7 знаков.
5. -110,0     - 6 знаков.
6. -109,0     - 6 знаков.
7. -108,5     - 6 знаков.
8. 0          - 1 знак.
--------------------------
                57 знаков за один кадр.








Переделываем лог-файл

```
Давай мы изменим формат лог файла чтобы обеспечить правильность обработки данных. Можем туда заносить данные именно по времени. Если есть предложения то давай переделаем. Напиши правильно информацию в лог файле как она должна выглядеть. Моё предложение такое, можешь его поправить если есть более оптимальное предложение. Предлагаю так же убрать данные об угловых скоростях, потому что их можно легко посчитать. Эти данные так же приходят по ком-порту.
Лог-файл:
##########
# Исследование № 000002
# 2025-11-05 13:01:17
##########
0000000001;-77.25;11.15;61.00;0;1
0000000023;-77.35;11.15;61.00;1;1
0000000054;-77.45;11.20;60.95;0;1
0000000234;-77.50;11.25;61.05;0;0
Первые 4 строки так же информация. 
; - это разделитель между значениями
0000000023;-77.35;11.15;61.00;1;1
0000000023 - время в мс с начала запуска программы
-77.35 - угол по пичу
11.15 - угол по роллу
61.00 - угол по яв
1 - сигнал головокружения от пациента (оранжевый цвет на графике)
1 - сигнал головокружения от врача (синий цвет на графике)
```